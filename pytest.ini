[pytest]
pythonpath = src
# --- Pytest Configuration ---
# Sets the minimum required version for pytest
minversion = 8.0

# --- Test Discovery ---
# Specifies the directory to search for tests
testpaths = tests
# Specifies the file pattern for test modules
python_files = test_*.py
# Specifies the function/method pattern for tests
python_functions = test_*
# Specifies the class pattern for test classes
python_classes = Test*

# --- Execution & Addons ---
# Default command-line options:
# -v: verbose
# -q: quiet (less verbose)
# -ra: show extra test summary info for (R)eported, (A)ll
# --tb=short: shorter, cleaner tracebacks
# --disable-warnings: hide deprecation and other warnings
# --maxfail=1: stop after the first test failure
# --durations=5: show the 5 slowest tests
addopts = -ra -q --tb=short --disable-warnings --maxfail=1 --durations=5

# --- AsyncIO ---
# Automatically run tests marked with @pytest.mark.asyncio
asyncio_mode = auto

# --- Code Coverage (pytest-cov) ---
# Enable coverage and specify the source directory
cov = src
# Report coverage to terminal, showing missing lines
cov-report = term-missing
# Fail if total coverage is below 90%
cov-fail-under = 90

# --- Directory & Warning Filters ---
# Directories to ignore during test discovery
norecursedirs = .git .venv __pycache__ logs output .pytest_cache
# Filter specific warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::RuntimeWarning